import"../chunks/DsnmJJEf.js";import{p as Be,s as V,a as Ce,o as ze,f as _,h as Ee,c as n,d as Fe,$ as Me,t as f,e as a,g as o,j as k,n as m,r as t,i as e,k as re,l as ae,m as D,q as g,u as Se}from"../chunks/DLqH200v.js";import{i as b}from"../chunks/uQGPdJUk.js";import{e as qe,i as Ae}from"../chunks/BCgPi0gr.js";import{s as Le}from"../chunks/C7f289bl.js";import{a as B}from"../chunks/GrWgsx-T.js";import{B as Ne}from"../chunks/Dw1y8d7D.js";import{B as h,C as Ue}from"../chunks/DtqFLeEY.js";var Ge=_('<div class="text-center py-12"><div class="inline-block w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div> <p class="mt-2 text-gray-600">Loading training jobs...</p></div>'),Re=_('<div class="text-center py-12"><div class="text-red-600 text-lg"> </div> <!></div>'),Ve=_('<div class="text-center py-12"><div class="text-gray-400 text-6xl mb-4">⚡</div> <h3 class="text-xl font-semibold text-gray-900 mb-2">No training jobs yet</h3> <p class="text-gray-500 mb-6">Start training your first model to see jobs here.</p> <!></div>'),He=_('<div class="mt-3"><div class="flex items-center justify-between text-sm"><span class="text-gray-600">Progress</span> <span class="text-gray-900"> </span></div> <div class="mt-1 w-full bg-gray-200 rounded-full h-2"><div class="bg-primary-600 h-2 rounded-full transition-all"></div></div></div>'),Ie=_('<div class="mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700"><strong>Error:</strong> </div>'),Ke=_('<div class="flex items-center justify-between"><div class="flex-1"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-900"> </h3> <!></div> <div class="mt-1 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600"><div><span class="font-medium">Base Model:</span> </div> <div><span class="font-medium">Dataset:</span> </div> <div><span class="font-medium">Created:</span> </div></div> <!> <!></div> <div class="ml-6 flex gap-2"><!> <!></div></div>'),Oe=_('<div class="space-y-4"></div>'),Qe=_('<div class="min-h-screen bg-gray-50"><div class="bg-white shadow"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center py-6"><div class="flex items-center"><!> <h1 class="text-3xl font-bold text-gray-900 ml-4">Training Jobs</h1></div> <div class="flex gap-3"><!></div></div></div></div> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></div></div>');function at(se,ie){Be(ie,!0);let P=V(Ce([])),H=V(!0),C=V("");ze(async()=>{try{const r=await B.getTrainingJobs();k(P,r.items,!0)}catch(r){k(C,r instanceof Error?r.message:"Failed to load training jobs",!0)}finally{k(H,!1)}});function ne(r){return new Date(r).toLocaleString()}function oe(r){switch(r){case"completed":return"success";case"failed":case"cancelled":return"error";case"running":return"info";default:return"warning"}}async function de(r){if(confirm("Are you sure you want to cancel this training job?"))try{await B.cancelTrainingJob(r);const l=await B.getTrainingJobs();k(P,l.items,!0)}catch(l){alert("Failed to cancel job: "+(l instanceof Error?l.message:"Unknown error"))}}async function le(r,l){const x=`Are you sure you want to delete the training job "${l}"? This will remove the job from the list but won't delete the trained model files.`;if(confirm(x))try{await B.cancelTrainingJob(r);const y=await B.getTrainingJobs();k(P,y.items,!0)}catch(y){alert("Failed to delete job: "+(y instanceof Error?y.message:"Unknown error"))}}var z=Qe();Ee(r=>{Me.title="Training Jobs - Model Garden"});var E=a(z),I=a(E),K=a(I),F=a(K),ve=a(F);h(ve,{href:"/",variant:"ghost",size:"sm",children:(r,l)=>{m();var x=f("← Dashboard");n(r,x)},$$slots:{default:!0}}),m(2),t(F);var O=o(F,2),ce=a(O);h(ce,{href:"/training/new",variant:"primary",children:(r,l)=>{m();var x=f("+ New Training Job");n(r,x)},$$slots:{default:!0}}),t(O),t(K),t(I),t(E);var Q=o(E,2),me=a(Q);{var ue=r=>{var l=Ge();n(r,l)},pe=r=>{var l=re(),x=ae(l);{var y=$=>{var w=Re(),T=a(w),M=a(T,!0);t(T);var S=o(T,2);h(S,{onclick:()=>window.location.reload(),variant:"primary",class:"mt-4",children:(u,p)=>{m();var J=f("Retry");n(u,J)},$$slots:{default:!0}}),t(w),D(()=>g(M,e(C))),n($,w)},fe=$=>{var w=re(),T=ae(w);{var M=u=>{var p=Ve(),J=o(a(p),6);h(J,{href:"/training/new",variant:"primary",children:(s,W)=>{m();var X=f("Start First Training Job");n(s,X)},$$slots:{default:!0}}),t(p),n(u,p)},S=u=>{var p=Oe();qe(p,21,()=>e(P),Ae,(J,s)=>{Ue(J,{children:(W,X)=>{var q=Ke(),A=a(q),L=a(A),N=a(L),ge=a(N,!0);t(N);var _e=o(N,2);{let i=Se(()=>oe(e(s).status));Ne(_e,{get variant(){return e(i)},children:(d,v)=>{m();var c=f();D(()=>g(c,e(s).status)),n(d,c)},$$slots:{default:!0}})}t(L);var U=o(L,2),G=a(U),xe=o(a(G));t(G);var R=o(G,2),he=o(a(R));t(R);var Y=o(R,2),ye=o(a(Y));t(Y),t(U);var Z=o(U,2);{var $e=i=>{var d=He(),v=a(d),c=o(a(v),2),ke=a(c);t(c),t(v);var te=o(v,2),De=a(te);t(te),t(d),D(()=>{g(ke,`${e(s).progress.current_step??""} / ${e(s).progress.total_steps??""}
                        steps`),Le(De,`width: ${e(s).progress.current_step/e(s).progress.total_steps*100}%`)}),n(i,d)};b(Z,i=>{e(s).progress&&e(s).progress.total_steps>0&&i($e)})}var we=o(Z,2);{var be=i=>{var d=Ie(),v=o(a(d));t(d),D(()=>g(v,` ${e(s).error_message??""}`)),n(i,d)};b(we,i=>{e(s).error_message&&i(be)})}t(A);var j=o(A,2),ee=a(j);h(ee,{get href(){return`/training/${e(s).id??""}`},variant:"secondary",size:"sm",children:(i,d)=>{m();var v=f("Details");n(i,v)},$$slots:{default:!0}});var Pe=o(ee,2);{var Te=i=>{h(i,{variant:"danger",size:"sm",onclick:()=>de(e(s).id),children:(d,v)=>{m();var c=f("Cancel");n(d,c)},$$slots:{default:!0}})},Je=i=>{h(i,{variant:"danger",size:"sm",onclick:()=>le(e(s).id,e(s).name),children:(d,v)=>{m();var c=f("Delete");n(d,c)},$$slots:{default:!0}})};b(Pe,i=>{e(s).status==="running"||e(s).status==="queued"?i(Te):i(Je,!1)})}t(j),t(q),D(i=>{g(ge,e(s).name),g(xe,` ${e(s).base_model??""}`),g(he,` ${e(s).dataset_path??""}`),g(ye,` ${i??""}`)},[()=>ne(e(s).created_at)]),n(W,q)},$$slots:{default:!0}})}),t(p),n(u,p)};b(T,u=>{e(P).length===0?u(M):u(S,!1)},!0)}n($,w)};b(x,$=>{e(C)?$(y):$(fe,!1)},!0)}n(r,l)};b(me,r=>{e(H)?r(ue):r(pe,!1)})}t(Q),t(z),n(se,z),Fe()}export{at as component};
