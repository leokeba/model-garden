import"../chunks/DsnmJJEf.js";import{p as Ee,s as M,a as Me,o as Se,f as _,h as Re,c as n,d as Ue,$ as qe,t as f,e as s,g as o,j as y,n as u,r as a,i as e,k as de,l as W,m as J,q as p,u as X}from"../chunks/DLqH200v.js";import{i as T}from"../chunks/uQGPdJUk.js";import{e as Ae,i as Le}from"../chunks/BCgPi0gr.js";import{s as Ne}from"../chunks/C7f289bl.js";import{a as k}from"../chunks/D-TMAApK.js";import{B as Ge}from"../chunks/Dw1y8d7D.js";import{B as $,C as Ie}from"../chunks/3RODIbcq.js";var Ve=_('<div class="text-center py-12"><div class="inline-block w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div> <p class="mt-2 text-gray-600">Loading training jobs...</p></div>'),He=_('<div class="text-center py-12"><div class="text-red-600 text-lg"> </div> <!></div>'),Ke=_('<div class="text-center py-12"><div class="text-gray-400 text-6xl mb-4">⚡</div> <h3 class="text-xl font-semibold text-gray-900 mb-2">No training jobs yet</h3> <p class="text-gray-500 mb-6">Start training your first model to see jobs here.</p> <!></div>'),Oe=_('<div class="mt-3"><div class="flex items-center justify-between text-sm"><span class="text-gray-600">Progress</span> <span class="text-gray-900"> </span></div> <div class="mt-1 w-full bg-gray-200 rounded-full h-2"><div class="bg-primary-600 h-2 rounded-full transition-all"></div></div></div>'),Qe=_('<div class="mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700"><strong>Error:</strong> </div>'),We=_("<!> <!>",1),Xe=_('<div class="flex items-center justify-between"><div class="flex-1"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-900"> </h3> <!></div> <div class="mt-1 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600"><div><span class="font-medium">Base Model:</span> </div> <div><span class="font-medium">Dataset:</span> </div> <div><span class="font-medium">Created:</span> </div></div> <!> <!></div> <div class="ml-6 flex gap-2"><!> <!></div></div>'),Ye=_('<div class="space-y-4"></div>'),Ze=_('<div class="min-h-screen bg-gray-50"><div class="bg-white shadow"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center py-6"><div class="flex items-center"><!> <h1 class="text-3xl font-bold text-gray-900 ml-4">Training Jobs</h1></div> <div class="flex gap-3"><!></div></div></div></div> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></div></div>');function lt(ve,ce){Ee(ce,!0);let P=M(Me([])),Y=M(!0),S=M(""),D=M(null);Se(async()=>{try{const t=await k.getTrainingJobs();y(P,t.items,!0)}catch(t){y(S,t instanceof Error?t.message:"Failed to load training jobs",!0)}finally{y(Y,!1)}});function ue(t){return new Date(t).toLocaleString()}function me(t){switch(t){case"completed":return"success";case"failed":case"cancelled":return"error";case"running":return"info";default:return"warning"}}async function ge(t){if(confirm("Are you sure you want to cancel this training job?"))try{await k.cancelTrainingJob(t);const l=await k.getTrainingJobs();y(P,l.items,!0)}catch(l){alert("Failed to cancel job: "+(l instanceof Error?l.message:"Unknown error"))}}async function fe(t,l){const m=`Are you sure you want to delete the training job "${l}"? This will remove the job from the list but won't delete the trained model files.`;if(confirm(m))try{await k.cancelTrainingJob(t);const v=await k.getTrainingJobs();y(P,v.items,!0)}catch(v){alert("Failed to delete job: "+(v instanceof Error?v.message:"Unknown error"))}}async function pe(t,l){const m=`Rerun training job "${l}"?

This will create a new training job with the same configuration.`;if(confirm(m))try{y(D,t,!0);const v=await k.rerunTrainingJob(t);if(v.success&&v.data){const A=v.data.job_id;window.location.href=`/training/${A}`}else alert("Failed to rerun job: "+(v.message||"Unknown error"))}catch(v){alert("Failed to rerun job: "+(v instanceof Error?v.message:"Unknown error"))}finally{y(D,null)}}var R=Ze();Re(t=>{qe.title="Training Jobs - Model Garden"});var U=s(R),Z=s(U),j=s(Z),q=s(j),_e=s(q);$(_e,{href:"/",variant:"ghost",size:"sm",children:(t,l)=>{u();var m=f("← Dashboard");n(t,m)},$$slots:{default:!0}}),u(2),a(q);var ee=o(q,2),xe=s(ee);$(xe,{href:"/training/new",variant:"primary",children:(t,l)=>{u();var m=f("+ New Training Job");n(t,m)},$$slots:{default:!0}}),a(ee),a(j),a(Z),a(U);var te=o(U,2),he=s(te);{var $e=t=>{var l=Ve();n(t,l)},ye=t=>{var l=de(),m=W(l);{var v=w=>{var b=He(),F=s(b),L=s(F,!0);a(F);var N=o(F,2);$(N,{onclick:()=>window.location.reload(),variant:"primary",class:"mt-4",children:(x,h)=>{u();var z=f("Retry");n(x,z)},$$slots:{default:!0}}),a(b),J(()=>p(L,e(S))),n(w,b)},A=w=>{var b=de(),F=W(b);{var L=x=>{var h=Ke(),z=o(s(h),6);$(z,{href:"/training/new",variant:"primary",children:(r,re)=>{u();var ae=f("Start First Training Job");n(r,ae)},$$slots:{default:!0}}),a(h),n(x,h)},N=x=>{var h=Ye();Ae(h,21,()=>e(P),Le,(z,r)=>{Ie(z,{children:(re,ae)=>{var G=Xe(),I=s(G),V=s(I),H=s(V),we=s(H,!0);a(H);var be=o(H,2);{let i=X(()=>me(e(r).status));Ge(be,{get variant(){return e(i)},children:(d,c)=>{u();var g=f();J(()=>p(g,e(r).status)),n(d,g)},$$slots:{default:!0}})}a(V);var K=o(V,2),O=s(K),Je=o(s(O));a(O);var Q=o(O,2),Te=o(s(Q));a(Q);var se=o(Q,2),ke=o(s(se));a(se),a(K);var ie=o(K,2);{var Pe=i=>{var d=Oe(),c=s(d),g=o(s(c),2),B=s(g);a(g),a(c);var C=o(c,2),E=s(C);a(C),a(d),J(()=>{p(B,`${e(r).progress.current_step??""} / ${e(r).progress.total_steps??""}
                        steps`),Ne(E,`width: ${e(r).progress.current_step/e(r).progress.total_steps*100}%`)}),n(i,d)};T(ie,i=>{e(r).progress&&e(r).progress.total_steps>0&&i(Pe)})}var De=o(ie,2);{var Fe=i=>{var d=Qe(),c=o(s(d));a(d),J(()=>p(c,` ${e(r).error_message??""}`)),n(i,d)};T(De,i=>{e(r).error_message&&i(Fe)})}a(I);var ne=o(I,2),oe=s(ne);$(oe,{get href(){return`/training/${e(r).id??""}`},variant:"secondary",size:"sm",children:(i,d)=>{u();var c=f("Details");n(i,c)},$$slots:{default:!0}});var ze=o(oe,2);{var Be=i=>{$(i,{variant:"danger",size:"sm",onclick:()=>ge(e(r).id),children:(d,c)=>{u();var g=f("Cancel");n(d,g)},$$slots:{default:!0}})},Ce=i=>{var d=We(),c=W(d);{let B=X(()=>e(D)===e(r).id),C=X(()=>e(D)===e(r).id);$(c,{variant:"primary",size:"sm",onclick:()=>pe(e(r).id,e(r).name),get loading(){return e(B)},get disabled(){return e(C)},children:(E,je)=>{u();var le=f();J(()=>p(le,e(D)===e(r).id?"Starting...":"🔄 Rerun")),n(E,le)},$$slots:{default:!0}})}var g=o(c,2);$(g,{variant:"danger",size:"sm",onclick:()=>fe(e(r).id,e(r).name),children:(B,C)=>{u();var E=f("Delete");n(B,E)},$$slots:{default:!0}}),n(i,d)};T(ze,i=>{e(r).status==="running"||e(r).status==="queued"?i(Be):i(Ce,!1)})}a(ne),a(G),J(i=>{p(we,e(r).name),p(Je,` ${e(r).base_model??""}`),p(Te,` ${e(r).dataset_path??""}`),p(ke,` ${i??""}`)},[()=>ue(e(r).created_at)]),n(re,G)},$$slots:{default:!0}})}),a(h),n(x,h)};T(F,x=>{e(P).length===0?x(L):x(N,!1)},!0)}n(w,b)};T(m,w=>{e(S)?w(v):w(A,!1)},!0)}n(t,l)};T(he,t=>{e(Y)?t($e):t(ye,!1)})}a(te),a(R),n(ve,R),Ue()}export{lt as component};
