import"../chunks/DsnmJJEf.js";import{o as kt,s as m}from"../chunks/a3GB5oE2.js";import{p as Bt,s as R,a as Ct,f as g,h as Dt,b as d,c as St,$ as zt,t as f,e as a,g as i,d as k,n as u,r as t,i as r,j as at,k as rt,l as J,u as Et}from"../chunks/BiS4-4H5.js";import{i as $}from"../chunks/Ds2ovkUt.js";import{B as y,a as U,e as Ft,C as Mt,i as Lt}from"../chunks/CiTacZsq.js";import{s as Nt}from"../chunks/C_BU9Lg2.js";import{B as qt}from"../chunks/mzWPePKt.js";var At=g('<div class="text-center py-12"><div class="inline-block w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div> <p class="mt-2 text-gray-600">Loading training jobs...</p></div>'),Gt=g('<div class="text-center py-12"><div class="text-red-600 text-lg"> </div> <!></div>'),Rt=g('<div class="text-center py-12"><div class="text-gray-400 text-6xl mb-4">⚡</div> <h3 class="text-xl font-semibold text-gray-900 mb-2">No training jobs yet</h3> <p class="text-gray-500 mb-6">Start training your first model to see jobs here.</p> <!></div>'),Ut=g('<div class="mt-3"><div class="flex items-center justify-between text-sm"><span class="text-gray-600">Progress</span> <span class="text-gray-900"> </span></div> <div class="mt-1 w-full bg-gray-200 rounded-full h-2"><div class="bg-primary-600 h-2 rounded-full transition-all"></div></div></div>'),Vt=g('<div class="mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700"><strong>Error:</strong> </div>'),Ht=g('<div class="flex items-center justify-between"><div class="flex-1"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-900"> </h3> <!></div> <div class="mt-1 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600"><div><span class="font-medium">Base Model:</span> </div> <div><span class="font-medium">Dataset:</span> </div> <div><span class="font-medium">Created:</span> </div></div> <!> <!></div> <div class="ml-6 flex gap-2"><!> <!></div></div>'),It=g('<div class="space-y-4"></div>'),Kt=g('<div class="min-h-screen bg-gray-50"><div class="bg-white shadow"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center py-6"><div class="flex items-center"><!> <h1 class="text-3xl font-bold text-gray-900 ml-4">Training Jobs</h1></div> <div class="flex gap-3"><!></div></div></div></div> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></div></div>');function ta(et,st){Bt(st,!0);let T=R(Ct([])),V=R(!0),B=R("");kt(async()=>{try{const e=await U.getTrainingJobs();k(T,e.items,!0)}catch(e){k(B,e instanceof Error?e.message:"Failed to load training jobs",!0)}finally{k(V,!1)}});function it(e){return new Date(e).toLocaleString()}function nt(e){switch(e){case"completed":return"success";case"failed":case"cancelled":return"error";case"running":return"info";default:return"warning"}}async function dt(e){if(confirm("Are you sure you want to cancel this training job?"))try{await U.cancelTrainingJob(e);const v=await U.getTrainingJobs();k(T,v.items,!0)}catch(v){alert("Failed to cancel job: "+(v instanceof Error?v.message:"Unknown error"))}}var C=Kt();Dt(e=>{zt.title="Training Jobs - Model Garden"});var D=a(C),H=a(D),I=a(H),S=a(I),ot=a(S);y(ot,{href:"/",variant:"ghost",size:"sm",children:(e,v)=>{u();var w=f("← Dashboard");d(e,w)},$$slots:{default:!0}}),u(2),t(S);var K=i(S,2),vt=a(K);y(vt,{href:"/training/new",variant:"primary",children:(e,v)=>{u();var w=f("+ New Training Job");d(e,w)},$$slots:{default:!0}}),t(K),t(I),t(H),t(D);var O=i(D,2),lt=a(O);{var ct=e=>{var v=At();d(e,v)},pt=e=>{var v=at(),w=rt(v);{var mt=x=>{var h=Gt(),b=a(h),z=a(b,!0);t(b);var E=i(b,2);y(E,{onclick:()=>window.location.reload(),variant:"primary",class:"mt-4",children:(c,p)=>{u();var P=f("Retry");d(c,P)},$$slots:{default:!0}}),t(h),J(()=>m(z,r(B))),d(x,h)},ut=x=>{var h=at(),b=rt(h);{var z=c=>{var p=Rt(),P=i(a(p),6);y(P,{href:"/training/new",variant:"primary",children:(s,Q)=>{u();var W=f("Start First Training Job");d(s,W)},$$slots:{default:!0}}),t(p),d(c,p)},E=c=>{var p=It();Ft(p,21,()=>r(T),Lt,(P,s)=>{Mt(P,{children:(Q,W)=>{var F=Ht(),M=a(F),L=a(M),N=a(L),gt=a(N,!0);t(N);var _t=i(N,2);{let n=Et(()=>nt(r(s).status));qt(_t,{get variant(){return r(n)},children:(o,l)=>{u();var _=f();J(()=>m(_,r(s).status)),d(o,_)},$$slots:{default:!0}})}t(L);var q=i(L,2),A=a(q),ft=i(a(A));t(A);var G=i(A,2),xt=i(a(G));t(G);var X=i(G,2),ht=i(a(X));t(X),t(q);var Y=i(q,2);{var $t=n=>{var o=Ut(),l=a(o),_=i(a(l),2),Jt=a(_);t(_),t(l);var tt=i(l,2),Tt=a(tt);t(tt),t(o),J(()=>{m(Jt,`${r(s).progress.current_step??""} / ${r(s).progress.total_steps??""} steps`),Nt(Tt,`width: ${r(s).progress.current_step/r(s).progress.total_steps*100}%`)}),d(n,o)};$(Y,n=>{r(s).progress&&r(s).progress.total_steps>0&&n($t)})}var yt=i(Y,2);{var wt=n=>{var o=Vt(),l=i(a(o));t(o),J(()=>m(l,` ${r(s).error_message??""}`)),d(n,o)};$(yt,n=>{r(s).error_message&&n(wt)})}t(M);var Z=i(M,2),j=a(Z);y(j,{get href(){return`/training/${r(s).id??""}`},variant:"secondary",size:"sm",children:(n,o)=>{u();var l=f("Details");d(n,l)},$$slots:{default:!0}});var bt=i(j,2);{var Pt=n=>{y(n,{variant:"danger",size:"sm",onclick:()=>dt(r(s).id),children:(o,l)=>{u();var _=f("Cancel");d(o,_)},$$slots:{default:!0}})};$(bt,n=>{(r(s).status==="running"||r(s).status==="queued")&&n(Pt)})}t(Z),t(F),J(n=>{m(gt,r(s).name),m(ft,` ${r(s).base_model??""}`),m(xt,` ${r(s).dataset_path??""}`),m(ht,` ${n??""}`)},[()=>it(r(s).created_at)]),d(Q,F)},$$slots:{default:!0}})}),t(p),d(c,p)};$(b,c=>{r(T).length===0?c(z):c(E,!1)},!0)}d(x,h)};$(w,x=>{r(B)?x(mt):x(ut,!1)},!0)}d(e,v)};$(lt,e=>{r(V)?e(ct):e(pt,!1)})}t(O),t(C),d(et,C),St()}export{ta as component};
