import"../chunks/DsnmJJEf.js";import{q as Wt,p as Ot,s as g,a as ht,o as Jt,f,h as At,k as ot,b as o,c as Gt,$ as Vt,d as r,t as O,g as i,e as s,n as M,r as a,i as e,l as J,m as U,j as $t,u as ft}from"../chunks/ZXdHezLC.js";import{i as A}from"../chunks/CnQbhIlQ.js";import{r as Xt,e as wt,s as Ht,i as kt}from"../chunks/C2YVWTdS.js";import{s as It}from"../chunks/BY0-HI7O.js";import{b as Kt}from"../chunks/Bbu82ZTT.js";import{b as Rt}from"../chunks/RUopsz-q.js";import{b as Yt}from"../chunks/CvrCSw2x.js";import{B as R,a as mt,C as dt}from"../chunks/ByOzdI1s.js";import{B as Qt}from"../chunks/xrVGPLka.js";function Zt(G,h,_){const j=G.target;j.files&&j.files[0]&&(r(h,j.files[0],!0),e(_)||r(_,j.files[0].name.replace(/\.[^/.]+$/,""),!0))}var te=(G,h)=>r(h,""),ee=f('<div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"><div class="flex items-start"><span class="text-red-600 mr-2">⚠️</span> <div class="flex-1"><p class="text-sm text-red-800"> </p></div> <button class="text-red-600 hover:text-red-800">✕</button></div></div>'),ae=f('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div></div>'),re=f('<div class="text-center py-12"><div class="text-6xl mb-4">📊</div> <h3 class="text-xl font-semibold text-gray-700 mb-2">No datasets yet</h3> <p class="text-gray-500 mb-6">Upload a dataset to get started with training</p> <!></div>'),se=(G,h,_)=>h(e(_).name),le=f('<div class="p-6"><div class="flex justify-between items-start mb-4"><div class="flex-1 min-w-0"><h3 class="text-lg font-semibold text-gray-900 truncate mb-1"> </h3> <!></div> <button class="text-gray-400 hover:text-red-600 transition-colors ml-2" title="Delete dataset">🗑️</button></div> <div class="space-y-2 mb-4"><div class="flex justify-between text-sm"><span class="text-gray-600">Examples:</span> <span class="font-medium text-gray-900"> </span></div> <div class="flex justify-between text-sm"><span class="text-gray-600">Size:</span> <span class="font-medium text-gray-900"> </span></div> <div class="flex justify-between text-sm"><span class="text-gray-600">Created:</span> <span class="font-medium text-gray-900 truncate ml-2"> </span></div></div> <div class="flex gap-2"><!> <!></div></div>'),ie=f('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),oe=(G,h,_,j,b)=>{r(h,!1),r(_,null),r(j,""),r(b,0)},de=f('<div><div class="flex justify-between text-sm text-gray-600 mb-2"><span>Uploading...</span> <span> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-primary-600 h-2 rounded-full transition-all duration-300"></div></div></div>'),ne=f(`<div class="p-6"><div class="flex justify-between items-center mb-6"><h2 class="text-2xl font-bold text-gray-900">Upload Dataset</h2> <button class="text-gray-400 hover:text-gray-600">✕</button></div> <div class="space-y-6"><div><label for="dataset-file" class="block text-sm font-medium text-gray-700 mb-2">Dataset File</label> <input type="file" id="dataset-file" accept=".json,.jsonl,.csv,.txt,.parquet" class="block w-full text-sm text-gray-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-lg file:border-0
                file:text-sm file:font-semibold
                file:bg-primary-50 file:text-primary-700
                hover:file:bg-primary-100
                disabled:opacity-50 disabled:cursor-not-allowed"/> <p class="mt-2 text-xs text-gray-500">Supported formats: JSON, JSONL, CSV, TXT, Parquet</p></div> <div><label for="dataset-name" class="block text-sm font-medium text-gray-700 mb-2">Dataset Name</label> <input type="text" id="dataset-name" placeholder="my-dataset" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100"/></div> <div><label for="dataset-type" class="block text-sm font-medium text-gray-700 mb-2">Dataset Type</label> <select id="dataset-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100"><option>Text</option><option>Vision</option><option>Multimodal</option></select></div> <!> <div class="flex gap-3 pt-4"><!> <!></div></div></div>`),ve=f('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><!></div>'),ce=(G,h,_)=>{r(h,null),r(_,[],!0)},ue=f('<div class="flex justify-center items-center h-32"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div></div>'),pe=f('<p class="text-center text-gray-500 py-8">No data to preview</p>'),fe=f('<div class="border border-gray-200 rounded-lg p-4 bg-gray-50"><div class="text-xs font-medium text-gray-500 mb-2"></div> <pre class="text-sm text-gray-900 whitespace-pre-wrap overflow-x-auto"> </pre></div>'),me=f('<div class="space-y-4"></div>'),_e=f('<div class="p-6 border-b border-gray-200"><div class="flex justify-between items-center"><div><h2 class="text-2xl font-bold text-gray-900"> </h2> <p class="text-sm text-gray-600 mt-1">Showing first 10 samples</p></div> <button class="text-gray-400 hover:text-gray-600">✕</button></div></div> <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t border-gray-200"><!></div>',1),xe=f('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><!></div>'),ge=f('<div class="min-h-screen bg-gray-50 pt-6"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="flex justify-between items-center mb-8"><div><h1 class="text-3xl font-bold text-gray-900">Datasets</h1> <p class="mt-2 text-sm text-gray-600">Manage training datasets for fine-tuning models</p></div> <!></div> <!> <!></div></div> <!> <!>',1);function Se(G,h){Ot(h,!0);let _=g(ht([])),j=g(!0),b=g(""),$=g(!1),V=g(0),_t=g(void 0),X=g(null),B=g(""),nt=g("text"),Y=g(!1),st=g(null),Q=g(ht([])),vt=g(!1);async function ct(){try{r(j,!0),r(b,"");const t=await mt.get("/datasets");r(_,t.datasets||[],!0)}catch(t){r(b,t instanceof Error?t.message:"Failed to load datasets",!0),r(_,[],!0)}finally{r(j,!1)}}async function Dt(){if(!(!e(X)||!e(B).trim()))try{r($,!0),r(V,0);const t=new FormData;t.append("file",e(X)),t.append("name",e(B).trim()),t.append("type",e(nt));const l=new XMLHttpRequest;l.upload.addEventListener("progress",v=>{v.lengthComputable&&r(V,v.loaded/v.total*100)}),l.addEventListener("load",()=>{l.status===200?(r(Y,!1),r(X,null),r(B,""),r(V,0),ct()):r(b,"Upload failed: "+l.statusText)}),l.addEventListener("error",()=>{r(b,"Upload failed: Network error")}),l.open("POST","http://localhost:8000/api/v1/datasets/upload"),l.send(t)}catch(t){r(b,t instanceof Error?t.message:"Failed to upload dataset",!0)}finally{r($,!1)}}async function jt(t){if(confirm(`Are you sure you want to delete dataset "${t}"?`))try{await mt.delete(`/datasets/${t}`),await ct()}catch(l){r(b,l instanceof Error?l.message:"Failed to delete dataset",!0)}}async function Pt(t){try{r(vt,!0),r(st,t,!0);const l=await mt.get(`/datasets/${t.name}/preview?limit=10`);r(Q,l.samples||[],!0)}catch(l){r(b,l instanceof Error?l.message:"Failed to load preview",!0),r(Q,[],!0)}finally{r(vt,!1)}}function Ft(t){if(t===0)return"0 B";const l=1024,v=["B","KB","MB","GB"],y=Math.floor(Math.log(t)/Math.log(l));return parseFloat((t/Math.pow(l,y)).toFixed(2))+" "+v[y]}function St(t){return t?new Date(t).toLocaleString():"N/A"}function Mt(t){return{jsonl:"success",json:"success",csv:"info",parquet:"info",txt:"warning"}[t]||"info"}Jt(()=>{ct()});var xt=ge();At(t=>{Vt.title="Datasets - Model Garden"});var ut=ot(xt),gt=s(ut),pt=s(gt),Ut=i(s(pt),2);R(Ut,{onclick:()=>r(Y,!0),variant:"primary",children:(t,l)=>{M();var v=O("+ Upload Dataset");o(t,v)},$$slots:{default:!0}}),a(pt);var bt=i(pt,2);{var Bt=t=>{var l=ee(),v=s(l),y=i(s(v),2),Z=s(y),c=s(Z,!0);a(Z),a(y);var u=i(y,2);u.__click=[te,b],a(v),a(l),J(()=>U(c,e(b))),o(t,l)};A(bt,t=>{e(b)&&t(Bt)})}var Ct=i(bt,2);{var zt=t=>{var l=ae();o(t,l)},Et=t=>{var l=$t(),v=ot(l);{var y=c=>{dt(c,{children:(u,N)=>{var n=re(),P=i(s(n),6);R(P,{onclick:()=>r(Y,!0),variant:"primary",children:(T,F)=>{M();var x=O("Upload Your First Dataset");o(T,x)},$$slots:{default:!0}}),a(n),o(u,n)},$$slots:{default:!0}})},Z=c=>{var u=ie();wt(u,21,()=>e(_),kt,(N,n)=>{dt(N,{class:"hover:shadow-lg transition-shadow",children:(P,T)=>{var F=le(),x=s(F),C=s(x),S=s(C),H=s(S,!0);a(S);var q=i(S,2);{let L=ft(()=>Mt(e(n).format));Qt(q,{get variant(){return e(L)},size:"sm",children:(W,it)=>{M();var rt=O();J(qt=>U(rt,qt),[()=>e(n).format.toUpperCase()]),o(W,rt)},$$slots:{default:!0}})}a(C);var tt=i(C,2);tt.__click=[se,jt,n],a(x);var p=i(x,2),w=s(p),z=i(s(w),2),et=s(z,!0);a(z),a(w);var I=i(w,2),d=i(s(I),2),m=s(d,!0);a(d),a(I);var k=i(I,2),D=i(s(k),2),lt=s(D,!0);a(D),a(k),a(p);var E=i(p,2),K=s(E);R(K,{onclick:()=>Pt(e(n)),variant:"secondary",size:"sm",fullWidth:!0,children:(L,W)=>{M();var it=O("👁️ Preview");o(L,it)},$$slots:{default:!0}});var at=i(K,2);{let L=ft(()=>`/training/new?dataset=${e(n).name}`);R(at,{get href(){return e(L)},variant:"primary",size:"sm",fullWidth:!0,children:(W,it)=>{M();var rt=O("🎓 Train");o(W,rt)},$$slots:{default:!0}})}a(E),a(F),J((L,W,it,rt)=>{U(H,e(n).name),U(et,L),U(m,W),Ht(D,"title",it),U(lt,rt)},[()=>e(n).examples.toLocaleString(),()=>Ft(e(n).size),()=>St(e(n).created_at),()=>new Date(e(n).created_at).toLocaleDateString()]),o(P,F)},$$slots:{default:!0}})}),a(u),o(c,u)};A(v,c=>{e(_).length===0?c(y):c(Z,!1)},!0)}o(t,l)};A(Ct,t=>{e(j)?t(zt):t(Et,!1)})}a(gt),a(ut);var yt=i(ut,2);{var Lt=t=>{var l=ve(),v=s(l);dt(v,{class:"max-w-2xl w-full",children:(y,Z)=>{var c=ne(),u=s(c),N=i(s(u),2);N.__click=[oe,Y,X,B,V],a(u);var n=i(u,2),P=s(n),T=i(s(P),2);T.__change=[Zt,X,B],Yt(T,d=>r(_t,d),()=>e(_t)),M(2),a(P);var F=i(P,2),x=i(s(F),2);Xt(x),a(F);var C=i(F,2),S=i(s(C),2),H=s(S);H.value=H.__value="text";var q=i(H);q.value=q.__value="vision";var tt=i(q);tt.value=tt.__value="multimodal",a(S),a(C);var p=i(C,2);{var w=d=>{var m=de(),k=s(m),D=i(s(k),2),lt=s(D);a(D),a(k);var E=i(k,2),K=s(E);a(E),a(m),J(at=>{U(lt,`${at??""}%`),It(K,`width: ${e(V)??""}%`)},[()=>Math.round(e(V))]),o(d,m)};A(p,d=>{e($)&&d(w)})}var z=i(p,2),et=s(z);R(et,{onclick:()=>{r(Y,!1),r(X,null),r(B,""),r(V,0)},variant:"secondary",fullWidth:!0,get disabled(){return e($)},children:(d,m)=>{M();var k=O("Cancel");o(d,k)},$$slots:{default:!0}});var I=i(et,2);{let d=ft(()=>!e(X)||!e(B).trim()||e($));R(I,{onclick:Dt,variant:"primary",fullWidth:!0,get disabled(){return e(d)},get loading(){return e($)},children:(m,k)=>{M();var D=O();J(()=>U(D,e($)?"Uploading...":"Upload")),o(m,D)},$$slots:{default:!0}})}a(z),a(n),a(c),J(()=>{N.disabled=e($),T.disabled=e($),x.disabled=e($),S.disabled=e($)}),Kt(x,()=>e(B),d=>r(B,d)),Rt(S,()=>e(nt),d=>r(nt,d)),o(y,c)},$$slots:{default:!0}}),a(l),o(t,l)};A(yt,t=>{e(Y)&&t(Lt)})}var Nt=i(yt,2);{var Tt=t=>{var l=xe(),v=s(l);dt(v,{class:"max-w-4xl w-full max-h-[80vh] flex flex-col",children:(y,Z)=>{var c=_e(),u=ot(c),N=s(u),n=s(N),P=s(n),T=s(P,!0);a(P),M(2),a(n);var F=i(n,2);F.__click=[ce,st,Q],a(N),a(u);var x=i(u,2),C=s(x);{var S=p=>{var w=ue();o(p,w)},H=p=>{var w=$t(),z=ot(w);{var et=d=>{var m=pe();o(d,m)},I=d=>{var m=me();wt(m,21,()=>e(Q),kt,(k,D,lt)=>{var E=fe(),K=s(E);K.textContent=`Sample ${lt+1}`;var at=i(K,2),L=s(at,!0);a(at),a(E),J(W=>U(L,W),[()=>JSON.stringify(e(D),null,2)]),o(k,E)}),a(m),o(d,m)};A(z,d=>{e(Q).length===0?d(et):d(I,!1)},!0)}o(p,w)};A(C,p=>{e(vt)?p(S):p(H,!1)})}a(x);var q=i(x,2),tt=s(q);R(tt,{onclick:()=>{r(st,null),r(Q,[],!0)},variant:"secondary",fullWidth:!0,children:(p,w)=>{M();var z=O("Close");o(p,z)},$$slots:{default:!0}}),a(q),J(()=>U(T,e(st).name)),o(y,c)},$$slots:{default:!0}}),a(l),o(t,l)};A(Nt,t=>{e(st)&&t(Tt)})}o(G,xt),Gt()}Wt(["click","change"]);export{Se as component};
