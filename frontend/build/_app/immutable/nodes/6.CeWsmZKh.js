import"../chunks/DsnmJJEf.js";import{o as Ft,s as v}from"../chunks/a3GB5oE2.js";import{p as Gt,f as p,h as Ot,b as i,c as Vt,l as w,t as G,e as a,i as e,s as ot,$ as qt,u as Ht,n as L,r as t,g as d,d as K,j as yt,k as bt}from"../chunks/BiS4-4H5.js";import{i as P,s as Kt,a as Qt}from"../chunks/Ds2ovkUt.js";import{B as O,a as Ut,s as $t,C as R,e as Xt,i as Yt}from"../chunks/CiTacZsq.js";import{s as Zt}from"../chunks/C_BU9Lg2.js";import{p as ta}from"../chunks/BKJkr7OX.js";var aa=p('<div class="flex items-center gap-2"><span> </span></div>'),ea=p('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div></div>'),ra=p('<div class="text-center py-8"><p class="text-red-600 text-lg"> </p> <!></div>'),da=p('<div><dt class="text-sm font-medium text-gray-700">Completed</dt> <dd class="mt-1 text-sm text-gray-900"> </dd></div>'),sa=p('<div class="p-6"><h2 class="text-xl font-semibold text-gray-900 mb-4">Job Information</h2> <div class="grid grid-cols-2 gap-4"><div><dt class="text-sm font-medium text-gray-700">Job ID</dt> <dd class="mt-1 text-sm text-gray-900"> </dd></div> <div><dt class="text-sm font-medium text-gray-700">Status</dt> <dd class="mt-1"><span> </span></dd></div> <div><dt class="text-sm font-medium text-gray-700">Model Name</dt> <dd class="mt-1 text-sm text-gray-900"> </dd></div> <div><dt class="text-sm font-medium text-gray-700">Base Model</dt> <dd class="mt-1 text-sm text-gray-900"> </dd></div> <div><dt class="text-sm font-medium text-gray-700">Dataset</dt> <dd class="mt-1 text-sm text-gray-900"> </dd></div> <div><dt class="text-sm font-medium text-gray-700">Output Directory</dt> <dd class="mt-1 text-sm text-gray-900"> </dd></div> <div><dt class="text-sm font-medium text-gray-700">Created</dt> <dd class="mt-1 text-sm text-gray-900"> </dd></div> <!></div></div>'),ia=p('<div class="grid grid-cols-2 gap-4 text-sm"><div><dt class="block text-gray-700">Current Step</dt> <dd class="font-semibold"> </dd></div> <div><dt class="block text-gray-700">Total Steps</dt> <dd class="font-semibold"> </dd></div></div>'),va=p('<div class="text-sm"><dt class="block text-gray-700">Current Epoch</dt> <dd class="font-semibold"> </dd></div>'),oa=p('<div class="p-6"><h2 class="text-xl font-semibold text-gray-900 mb-4">Training Progress</h2> <div class="space-y-4"><div><div class="flex justify-between text-sm text-gray-700 mb-1"><span>Progress</span> <span> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-primary-600 h-2 rounded-full transition-all duration-300"></div></div></div> <!> <!></div></div>'),la=p('<div class="mb-1"> </div>'),na=p('<div class="p-6"><h2 class="text-xl font-semibold text-gray-900 mb-4">Training Logs</h2> <div class="bg-gray-900 text-green-400 p-4 rounded-lg overflow-auto max-h-96 text-sm font-mono"></div></div>'),ca=p('<div class="p-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Configuration</h3> <div class="space-y-3 text-sm"><div><dt class="block text-gray-700 font-medium">Learning Rate</dt> <dd> </dd></div> <div><dt class="block text-gray-700 font-medium">Epochs</dt> <dd> </dd></div> <div><dt class="block text-gray-700 font-medium">Batch Size</dt> <dd> </dd></div> <div><dt class="block text-gray-700 font-medium">LoRA Rank</dt> <dd> </dd></div> <div><dt class="block text-gray-700 font-medium">LoRA Alpha</dt> <dd> </dd></div></div></div>'),_a=p('<div class="p-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Actions</h3> <div class="space-y-2"><!> <!> <!></div></div>'),ua=p('<div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2 space-y-6"><!> <!> <!></div> <div class="space-y-6"><!> <!></div></div>'),ma=p('<div class="min-h-screen bg-gray-50"><div class="bg-white shadow"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center py-6"><div class="flex items-center"><!> <h1 class="text-3xl font-bold text-gray-900 ml-4">Training Job Details</h1></div> <!></div></div></div> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></div></div>');function $a(wt,Pt){Gt(Pt,!0);const kt=()=>Qt(ta,"$page",jt),[jt,Ct]=Kt(),Q=Ht(()=>kt().params.id);let r=ot(null),U=ot(!0),X=ot("");async function V(){if(e(Q))try{K(U,!0);const s=await Ut.getTrainingJob(e(Q));K(r,s,!0)}catch(s){K(X,s instanceof Error?s.message:"Failed to load training job",!0)}finally{K(U,!1)}}function lt(s){switch(s){case"running":return"text-blue-600 bg-blue-100";case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}}function nt(s){return typeof s=="number"?Math.round(s*100):s&&typeof s.current_step=="number"&&typeof s.total_steps=="number"?Math.round(s.current_step/s.total_steps*100):0}function ct(s){return new Date(s).toLocaleString()}Ft(()=>{V();const s=setInterval(()=>{e(r)?.status==="running"&&V()},5e3);return()=>clearInterval(s)});var Y=ma();Ot(s=>{w(()=>qt.title=`Training Job ${e(Q)??""} - Model Garden`)});var Z=a(Y),_t=a(Z),ut=a(_t),tt=a(ut),Jt=a(tt);O(Jt,{href:"/training",variant:"ghost",size:"sm",children:(s,k)=>{L();var J=G("â† Training Jobs");i(s,J)},$$slots:{default:!0}}),L(2),t(tt);var St=d(tt,2);{var Tt=s=>{var k=aa(),J=a(k),at=a(J,!0);t(J),t(k),w(et=>{$t(J,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${et??""}`),v(at,e(r).status)},[()=>lt(e(r).status)]),i(s,k)};P(St,s=>{e(r)&&s(Tt)})}t(ut),t(_t),t(Z);var mt=d(Z,2),Mt=a(mt);{var Dt=s=>{var k=ea();i(s,k)},At=s=>{var k=yt(),J=bt(k);{var at=M=>{R(M,{children:(q,pt)=>{var z=ra(),S=a(z),B=a(S,!0);t(S);var E=d(S,2);O(E,{onclick:V,variant:"primary",class:"mt-4",children:(H,rt)=>{L();var dt=G("Try Again");i(H,dt)},$$slots:{default:!0}}),t(z),w(()=>v(B,e(X))),i(q,z)},$$slots:{default:!0}})},et=M=>{var q=yt(),pt=bt(q);{var z=S=>{var B=ua(),E=a(B),H=a(E);R(H,{children:(x,D)=>{var f=sa(),l=d(a(f),2),n=a(l),_=d(a(n),2),b=a(_,!0);t(_),t(n);var c=d(n,2),o=d(a(c),2),h=a(o),y=a(h,!0);t(h),t(o),t(c);var $=d(c,2),A=d(a($),2),T=a(A,!0);t(A),t($);var C=d($,2),u=d(a(C),2),m=a(u,!0);t(u),t(C);var g=d(C,2),j=d(a(g),2),st=a(j,!0);t(j),t(g);var I=d(g,2),W=d(a(I),2),it=a(W,!0);t(W),t(I);var vt=d(I,2),gt=d(a(vt),2),zt=a(gt,!0);t(gt),t(vt);var Bt=d(vt,2);{var Et=N=>{var F=da(),ht=d(a(F),2),Wt=a(ht,!0);t(ht),t(F),w(Nt=>v(Wt,Nt),[()=>ct(e(r).completed_at)]),i(N,F)};P(Bt,N=>{e(r).completed_at&&N(Et)})}t(l),t(f),w((N,F)=>{v(b,e(r).job_id||e(r).id),$t(h,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N??""}`),v(y,e(r).status),v(T,e(r).config?.name||e(r).name),v(m,e(r).config?.base_model||e(r).base_model),v(st,e(r).config?.dataset_path||e(r).dataset_path),v(it,e(r).config?.output_dir||e(r).output_dir),v(zt,F)},[()=>lt(e(r).status),()=>ct(e(r).created_at)]),i(x,f)},$$slots:{default:!0}});var rt=d(H,2);{var dt=x=>{R(x,{children:(D,f)=>{var l=oa(),n=d(a(l),2),_=a(n),b=a(_),c=d(a(b),2),o=a(c);t(c),t(b);var h=d(b,2),y=a(h);t(h),t(_);var $=d(_,2);{var A=u=>{var m=ia(),g=a(m),j=d(a(g),2),st=a(j,!0);t(j),t(g);var I=d(g,2),W=d(a(I),2),it=a(W,!0);t(W),t(I),t(m),w(()=>{v(st,e(r).current_step),v(it,e(r).total_steps)}),i(u,m)};P($,u=>{e(r).current_step&&e(r).total_steps&&u(A)})}var T=d($,2);{var C=u=>{var m=va(),g=d(a(m),2),j=a(g,!0);t(g),t(m),w(()=>v(j,e(r).current_epoch)),i(u,m)};P(T,u=>{e(r).current_epoch&&u(C)})}t(n),t(l),w((u,m)=>{v(o,`${u??""}%`),Zt(y,`width: ${m??""}%`)},[()=>nt(e(r).progress),()=>nt(e(r).progress)]),i(D,l)},$$slots:{default:!0}})};P(rt,x=>{e(r).status==="running"&&e(r).progress&&x(dt)})}var It=d(rt,2);{var Lt=x=>{R(x,{children:(D,f)=>{var l=na(),n=d(a(l),2);Xt(n,21,()=>e(r).logs,Yt,(_,b)=>{var c=la(),o=a(c,!0);t(c),w(()=>v(o,e(b))),i(_,c)}),t(n),t(l),i(D,l)},$$slots:{default:!0}})};P(It,x=>{e(r).logs&&e(r).logs.length>0&&x(Lt)})}t(E);var xt=d(E,2),ft=a(xt);R(ft,{children:(x,D)=>{var f=ca(),l=d(a(f),2),n=a(l),_=d(a(n),2),b=a(_,!0);t(_),t(n);var c=d(n,2),o=d(a(c),2),h=a(o,!0);t(o),t(c);var y=d(c,2),$=d(a(y),2),A=a($,!0);t($),t(y);var T=d(y,2),C=d(a(T),2),u=a(C,!0);t(C),t(T);var m=d(T,2),g=d(a(m),2),j=a(g,!0);t(g),t(m),t(l),t(f),w(()=>{v(b,e(r).config?.hyperparameters?.learning_rate||e(r).hyperparameters?.learning_rate),v(h,e(r).config?.hyperparameters?.num_epochs||e(r).hyperparameters?.num_epochs),v(A,e(r).config?.hyperparameters?.batch_size||e(r).hyperparameters?.batch_size),v(u,e(r).config?.lora_config?.r||e(r).lora_config?.r),v(j,e(r).config?.lora_config?.lora_alpha||e(r).lora_config?.lora_alpha)}),i(x,f)},$$slots:{default:!0}});var Rt=d(ft,2);R(Rt,{children:(x,D)=>{var f=_a(),l=d(a(f),2),n=a(l);O(n,{variant:"primary",fullWidth:!0,onclick:V,children:(o,h)=>{L();var y=G("Refresh Status");i(o,y)},$$slots:{default:!0}});var _=d(n,2);{var b=o=>{O(o,{get href(){return`/models/${e(r).config.name??""}`},variant:"secondary",fullWidth:!0,children:(h,y)=>{L();var $=G("View Model");i(h,$)},$$slots:{default:!0}})};P(_,o=>{e(r).status==="completed"&&e(r).config&&o(b)})}var c=d(_,2);O(c,{href:"/training/new",variant:"secondary",fullWidth:!0,children:(o,h)=>{L();var y=G("Start New Job");i(o,y)},$$slots:{default:!0}}),t(l),t(f),i(x,f)},$$slots:{default:!0}}),t(xt),t(B),i(S,B)};P(pt,S=>{e(r)&&S(z)},!0)}i(M,q)};P(J,M=>{e(X)?M(at):M(et,!1)},!0)}i(s,k)};P(Mt,s=>{e(U)?s(Dt):s(At,!1)})}t(mt),t(Y),i(wt,Y),Vt(),Ct()}export{$a as component};
